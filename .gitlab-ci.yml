image: node:latest

stages:
    - installing_browsers
    - npms
    - tests
    
installing_browsers:
    stage: installing_browsers
    script:
        - echo "installing browsers on docker instance"
        - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
        - sudo dpkg -i google-chrome-stable_current_amd64.deb
        # - apt-get update
        # - apt-get install google-chrome-stable -y
        
npms:
    stage: npms
    script:
        - npm install -g mocha selenium-browser chromedriver geckodriver
        - npm install
    cache:
        paths:
            - node_modules/
            
tests:
    stage: tests
    script:
        - mocha tests/
